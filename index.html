<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Snippet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="Jinyu Li">
  
  
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Snippet">
<meta property="og:url" content="http://www.mrsnippet.com/index.html">
<meta property="og:site_name" content="Snippet">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Snippet">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Snippet" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-42937397-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Snippet</a></h1>
    <p><a href="/"></a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/01/31/vim-tutorial-3/">
  <time datetime="2016-01-30T23:54:01.000Z">
    Jan 31 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/01/31/vim-tutorial-3/">vim tutorial 3</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="VIM_u5165_u95E8_uFF08_u4E09_uFF09-__u5750"><a href="#VIM_u5165_u95E8_uFF08_u4E09_uFF09-__u5750" class="headerlink" title="VIM入门（三）- 坐"></a>VIM入门（三）- 坐</h1><blockquote>
<p>我的手指疼</p>
<p>为什么？</p>
<p>昨天练习VIM，使用<strong>hjkl</strong>浏览了一个10w行代码的文件</p>
<p>…，一个代码文件10w行，还是转行吧</p>
<p>…</p>
</blockquote>
<p>如果你认真的练习了上一篇文章中的命令，就会迫切的希望学会这一篇文章种的命令了，因为这里可以学会跳跃试的浏览了。</p>
<p>有人会问什么不是一下子把所有的日常命令都介绍一下，还卖关子每次介绍一点。之所以这么做是因为VIM的命令太多，而之所以会有这么多的命令是由于<strong>需求</strong>，有了需求再学习会记得更牢。所以希望一步一步来，而不是一股脑把所有的命令都写出来。</p>
<p>所以先想想在使用VIM之前，你最想要哪些功能？如果你觉得<em>不使用鼠标</em>就是个噱头，那VIM并不适合你。</p>
<p>在看了上一篇文章的命令之后，你最需要哪些命令？是不是希望能快速的浏览一个大文件？</p>
<p>接下来就介绍一下哪些命令可以帮助我们快速的浏览10w行的文件吧。</p>
<h3 id="u884C_u6570"><a href="#u884C_u6570" class="headerlink" title="行数"></a>行数</h3><p>在介绍命令之前先说一下如何查看文件的行数。毕竟有了行数才能准确知道文件有多大，自己当前的位置在哪。</p>
<ul>
<li>Ctrl + g：显示当前的光标位置</li>
</ul>
<p>如果你的VIM左侧并没有显示行数，那么在Normal模式下（如果不确定当前在什么模式，可以按按ESC），可以使用以下命令：</p>
<ul>
<li>:set number（显示行数）</li>
<li>:set nonumber (不显示行数)</li>
</ul>
<p>那么这样，即使不使用Ctrl + g也可以知道位置了。</p>
<h3 id="u8DF3_u8F6C"><a href="#u8DF3_u8F6C" class="headerlink" title="跳转"></a>跳转</h3><ul>
<li>NO. + G：跳转到相应的行，比如100G，就会跳转到第100行</li>
<li>gg：跳转到第一行</li>
<li>G：跳转到最后一行</li>
</ul>
<p>哈哈，怎么样，有了这几个命令是不是就快多了！</p>
<h3 id="u7FFB_u9875"><a href="#u7FFB_u9875" class="headerlink" title="翻页"></a>翻页</h3><ul>
<li>Ctrl + u   向上翻页</li>
<li>Ctrl + d   向下翻页</li>
</ul>
<h3 id="u641C_u7D22"><a href="#u641C_u7D22" class="headerlink" title="搜索"></a>搜索</h3><p>在Normal模式下输入：</p>
<ul>
<li>/pattern</li>
</ul>
<p>之后就可以使用n（下一个匹配的）和N（上一个匹配的）来遍历所有的匹配pattern的位置了。</p>
<p>pattern也是支持regex的，不过这个在这里就不详细介绍了，以后会慢慢介绍。</p>
<p>在搜索的时候会发现VIM已经高亮了匹配的单词，有时这也会比较烦人，怎么取消高亮呢？这时可以在Normal模式下输入：</p>
<ul>
<li>:noh</li>
<li>或者搜索一个不可能出现的单词，比如/asdfaw</li>
</ul>
<p><strong>练习，练习，练习</strong></p>
<p>练习完之后看看你还有哪些迫切需要的功能，看看我下一篇讲的对不对，有需求的也可以留言哦。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/01/29/vim-tutorial-2/">
  <time datetime="2016-01-29T08:17:30.000Z">
    Jan 29 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/01/29/vim-tutorial-2/">vim tutorial 2</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="VIM_u5165_u95E8_uFF08_u4E8C_uFF09-__u51FA_u751F"><a href="#VIM_u5165_u95E8_uFF08_u4E8C_uFF09-__u51FA_u751F" class="headerlink" title="VIM入门（二）- 出生"></a>VIM入门（二）- 出生</h1><p>作为一个编辑器，主要的作用当然就是编辑文档。由于VIM不需要使用鼠标，那么除了<strong>编辑</strong>，还需要一个功能，就是<strong>移动</strong>光标，也就是模拟鼠标，让光标在文本中移动，所以今天会介绍几个移动和编辑的简单命令。</p>
<h3 id="u6A21_u5F0F"><a href="#u6A21_u5F0F" class="headerlink" title="模式"></a>模式</h3><p>在介绍命令之前，要首先介绍一下模式。</p>
<p>为什么会引入<strong>模式</strong>？</p>
<p>因为在使用VIM的过程中，不需要使用鼠标，而在文件中，为了即能移动光标，又能编辑文本，而这两种操作（移动，编辑）都是通过敲击键盘来完成的，那么就需要一种方式来区分这两种状态，于是VIM使用了模式。</p>
<p>VIM有很多种模式（据说有12种），但那么多模式很容易让初学者迷糊，所以这里只介绍两种：</p>
<ol>
<li>Normal mode: 在这种模式下可以移动光标，也可以使用一下命令来修改文本，比如删除，粘贴等。打开VIM的时候，默认既然Normal mode。</li>
<li>Insert Mode：这是编辑模式，也就是在使用其他编辑器的时候所处的模式，可以大量的输入文本。</li>
</ol>
<p>好模式简单介绍完了，但如何在模式之间转换呢？</p>
<ul>
<li><p>Normal mode进入Insert mode有很多种方式，两个最简单的：</p>
<ul>
<li>i：在当前光标所在位置开始插入内容</li>
<li>a：在当前光标所在位置之后开始插入内容</li>
<li>I：在当前光标所在的行首插入内容</li>
<li>A：在当前光标所在的行尾插入内容</li>
</ul>
</li>
<li><p>Insert mode进入Normal mode：<strong>ESC</strong>，之所以强调ESC，是因为这是一个非常强大的命令，在很多情况下，都可以使用<strong>ESC</strong>来取消当前的操作，并返回Normal mode。</p>
</li>
</ul>
<p><em>所以初学者在使用VIM的时候，如果发现VIM变得莫名其妙，不听指挥，也不知道是处于哪种模式，最好的办法就是按<strong>ESC</strong> 哈</em></p>
<p><em>另外一个值得注意的地方是，在VIM中很多字母的大小写代表了两个不同的命令，如果发现自己键盘按对了，但反应不对，可以看看CAPS是不是亮了</em></p>
<p>以下说的命令都是在Normal mode下使用的：</p>
<h3 id="u79FB_u52A8"><a href="#u79FB_u52A8" class="headerlink" title="移动"></a>移动</h3><ul>
<li>h 向左</li>
<li>j 向上</li>
<li>k 向下</li>
<li>l 向右</li>
</ul>
<p>这就是最基本也是最常用的移动命令，至于为什么会使用这四个键，还有不同的说法，有的说是由于<a href="http://www.catonmat.net/blog/why-vim-uses-hjkl-as-arrow-keys/" target="_blank" rel="external">远古时期的键盘设置</a>的原因，也有说是由于<a href="https://news.ycombinator.com/item?id=3684515" target="_blank" rel="external">ASCII码</a>的原因，不管怎么说，这么设置一定是有原因的。</p>
<p>可以先在VIM中练习一下这几个命令，看看是在VIM中是如何移动光标的，练到什么程度呢？就像打字一样，当你需要某个字符的时候，手指就会自动移动到相应的字符，练到这种程度就可以了。</p>
<h3 id="u7F16_u8F91"><a href="#u7F16_u8F91" class="headerlink" title="编辑"></a>编辑</h3><p>除了之前介绍的<strong>iaIA</strong>进入编辑模式外，在Normal mode也有几个命令可以简单的命令可以修改文本：</p>
<ul>
<li>x 删除当前光标所在字符</li>
<li>rN 替换当前光标所在字符为N（N为任意字符）</li>
</ul>
<p>好了，有了这些简单的命令，其实就已经满足了一个编辑器的最基本要求，虽然使用起来还不太方便，但其实任何更高级的命令都可以通过这些简单的命令来实现。所以在初学者可以先好好练习这几个命令，当你足够熟悉这些命令之后再去学习高级操作，相信那时对VIM会有更好的理解。</p>
<p>看完这一节后要做的练习是：</p>
<ul>
<li>移动光标</li>
<li>进入insert mode</li>
<li>返回normal mode</li>
<li>删除一个字符</li>
<li>替换一个字符</li>
</ul>
<p><strong>一定要多多练习，否则看多少教程都是没用的。</strong></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/01/28/vim-tutorial-1/">
  <time datetime="2016-01-27T23:41:24.000Z">
    Jan 28 2016
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/01/28/vim-tutorial-1/">vim tutorial 1</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h1 id="VIM_u5165_u95E8_28_u4E00_29__u2013__u5B55_u80B2"><a href="#VIM_u5165_u95E8_28_u4E00_29__u2013__u5B55_u80B2" class="headerlink" title="VIM入门(一) – 孕育"></a>VIM入门(一) – 孕育</h1><p>之所以会写这篇文章是为了督促自己学习VIM，所以我现在仍然是菜鸟一枚，希望和各位达人多多交流。同时对于这么好用的编辑器，也有人会问『为什么要用VIM？』，『为什么要记住那么多的命令？』，希望这些文章能从另一个角度帮助大家学习VIM，让更多的人使用VIM。</p>
<p>网上的VIM教程很多，但基本都只罗列出了命令，而不是循序渐进地告诉学习者如何记住这些命令，这写命令对于初学者来说成了一条拦路虎，刚刚要从GUI编辑器转到VIM，一看还要记住这么多命令，可能就中途放弃了。</p>
<p>VIM自带的help也很详细，但就像linux man一样是一个使用说明，不能帮助你理解为什么会有这些命令。</p>
<h3 id="u4E3A_u4EC0_u4E48_u8981_u7528VIM_uFF1F"><a href="#u4E3A_u4EC0_u4E48_u8981_u7528VIM_uFF1F" class="headerlink" title="为什么要用VIM？"></a>为什么要用VIM？</h3><ol>
<li>作为一个码农，很多时候是在写程序、和shell打交道，希望手能尽量放在键盘上，而不用时不时的摸摸鼠标</li>
<li>VIM提供了很多方便的命令，减少了很多重复工作</li>
<li>越来越多的IDE也都提供了VIM模式，说明这确实是一个高效的编辑器</li>
</ol>
<h3 id="u8FD8_u8981_u5B66_u4E60_u90A3_u4E48_u591A_u7684_u547D_u4EE4_uFF0C_u6211_u8BB0_u4E0D_u4F4F_u554A"><a href="#u8FD8_u8981_u5B66_u4E60_u90A3_u4E48_u591A_u7684_u547D_u4EE4_uFF0C_u6211_u8BB0_u4E0D_u4F4F_u554A" class="headerlink" title="还要学习那么多的命令，我记不住啊"></a>还要学习那么多的命令，我记不住啊</h3><ol>
<li>这是一个孰能生巧的工作，需要多多联系</li>
<li>并不是所有的命令都是需要记住的，VIM中做一个操作可能有很多种方式，只需要学会其中的一种，其余的可以慢慢学</li>
<li>遵循2/8原则，平时常用的命令也就那么几个，不用急着都学会，像我，现在也就会那么几个，还不熟练。:)</li>
</ol>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/02/reactive/">
  <time datetime="2015-03-02T06:06:33.000Z">
    Mar 2 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/03/02/reactive/">reactive</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>最近想仔细看看ReactiveCocoa，其实之前就用过，但是觉得没理解为什么会有这个框架，用得也是稀里糊涂，所以最近开始从文档看起。</p>
<p>在这个工程的<a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" rel="external">首页</a>，看到了这句话：</p>
<blockquote>
<p>ReactiveCocoa (RAC) is an Objective-C framework inspired by Functional Reactive Programming. It provides APIs for composing and transforming streams of values.</p>
</blockquote>
<p>FRP(Functional Reactive Programming)这是个新名词（对我来说），从名字上来看是和函数式编程和响应式编程相关，但这两个我都不了解，于是又去查资料，看看什么是FRP。没有找他详细的介绍，只在<a href="http://en.wikipedia.org/wiki/Functional_reactive_programming" target="_blank" rel="external">wiki</a>上找到了一个简单定义。但还是不理解啊。</p>
<p>于是继续看它的文档：<a href="https://github.com/ReactiveCocoa/ReactiveCocoa/blob/master/Documentation/DesignGuidelines.md" target="_blank" rel="external">Design Guide</a>，发现了这句话：</p>
<blockquote>
<p>This document contains guidelines for projects that want to make use of ReactiveCocoa. The content here is heavily inspired by the Rx Design Guidelines.</p>
</blockquote>
<p>似乎看到了希望，从微软的网站下载了<a href="http://blogs.msdn.com/b/rxteam/archive/2010/10/28/rx-design-guidelines.aspx" target="_blank" rel="external">Rx Design Guidelines</a>。一番折腾之后似乎总算找到了源头，但其实还应该看Functional Programming，但最近还没有看FP的计划啊，看来要加快速度了。</p>
<p>关于Rx（Reactive Extension），可以参考微软的<a href="https://msdn.microsoft.com/en-us/data/gg577609" target="_blank" rel="external">网站</a>，其中对Rx的定义如下：</p>
<blockquote>
<p>is a library to compose asynchronous and event-based programs using observable collections and LINQ-style query operators.</p>
</blockquote>
<p>由于我们要学习的是Reactive，所以可以暂时忽略其中涉及到的微软的名称，比如LINQ，翻译一下（由于不了解，所以翻译的并不准确）：</p>
<blockquote>
<p>Rx作为一个库，通过提供观察、查询数据流的功能，从而可以组成一个异步的、基于事件的程序。</p>
</blockquote>
<p>也就是说首先使用Rx写的程序，应该是一个基于事件的，类似与Node.js，同时是异步的，这一点也类似Node.js，我想理解这两点是使用Rx的基础。<br>关于LINQ，可以类比为SQL，提供了对数据集的操作。</p>
<p>另外一个要提到中是scheduler，在网站上有这样一个公式：</p>
<blockquote>
<p>Rx = Observables + LINQ + Schedulers.</p>
</blockquote>
<p>scheduler主要是用在多线程中控制数据流的。</p>
<p>关于Rx，还是需要仔细读读Rx Design Guidelines这个文档吧。</p>
<p>另外，感觉Rx和Promise很像，在网上找到了<a href="http://rmod.lille.inria.fr/archives/dyla13/dyla13_6_Evaluation_Reactive_Programming_Web_Apps.pdf" target="_blank" rel="external">这篇论文</a>，可以好好看看。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/03/02/GODEBUG/">
  <time datetime="2015-03-02T03:48:24.000Z">
    Mar 2 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/03/02/GODEBUG/">GODEBUG</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>最近在看Go语言的时候，一直好奇环境变量是如何传人的，今天在Go <a href="http://golang.org/pkg/runtime/" target="_blank" rel="external">runtime</a>文档中看到了一点信息。</p>
<p>传人的方式就是在启动Go程序的命令行前面加上要设置的环境变量，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GOMAXPROCS=2 go run main</span><br></pre></td></tr></table></figure></p>
<p>注意在文档中介绍了GODEBUG这个环境变量，可以在开发阶段使用，来打印gc相关的一些信息，这样对于我们调试程序很有帮助。<br>比如使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GODEBUG=schedtrace=1000 go run main</span><br></pre></td></tr></table></figure></p>
<p>就可以打印出类似下面的东东：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCHED 0ms: gomaxprocs=1 idleprocs=0 threads=2 spinningthreads=0 idlethreads=0 runqueue=0 [1]&#10;SCHED 1001ms: gomaxprocs=1 idleprocs=1 threads=3 spinningthreads=0 idlethreads=1 runqueue=0 [0]&#10;SCHED 2008ms: gomaxprocs=1 idleprocs=0 threads=3 spinningthreads=0 idlethreads=1 runqueue=0 [9]&#10;SCHED 3015ms: gomaxprocs=1 idleprocs=0 threads=3 spinningthreads=0 idlethreads=1 runqueue=0 [9]</span><br></pre></td></tr></table></figure></p>
<p>打印的主要是runtime内部的调度信息，如有多少个线程，有多少routine在运行，有多少在等待，等等。</p>
<p>而使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GODEBUG=gctrace=1 go run main</span><br></pre></td></tr></table></figure></p>
<p>就可以打印gc相关的信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gc1(1): 0+0+56+0 us, 0 -&#62; 0 MB, 21 (21-0) objects, 2 goroutines, 15/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields</span><br></pre></td></tr></table></figure></p>
<p>另外，也要关注一些runtime的下的子包，如：debug等。学习中。。。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/20/Promise-A-in-javascript/">
  <time datetime="2015-02-20T03:40:25.000Z">
    Feb 20 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/20/Promise-A-in-javascript/">Promise/A+ in javascript</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>之前我们讨论了Promise，但如果在网上仔细搜索的话，还会发现<a href="https://promisesaplus.com/" target="_blank" rel="external">Promise/A+</a>，仔细看过这个网站的内容就会发现，其实Promise/A+是Promise/A的一个补充，或者说实施细则。应该是在参照CommonJS的Promise/A使用了一段时间之后，对原有规范的细化，比如增加了thenable，对then方法的内部处理提出了更详细的规定。</p>
<p>另外，Javascript的下一个版本ECMAScript 6也将支持对Promise的原生支持，可以看看<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">Mozilla的实现</a></p>
<p>其实在实现Promise的时候，除了then，各个lib也会加入一些方便使用的方法，如when，all等。推荐几个比较流行的实现：</p>
<ul>
<li><a href="https://github.com/kriskowal/q" target="_blank" rel="external">Q</a></li>
<li><a href="https://github.com/cujojs/when" target="_blank" rel="external">when</a></li>
<li><a href="http://jquery.com/" target="_blank" rel="external">jQuery</a></li>
<li><a href="https://github.com/tildeio/rsvp.js" target="_blank" rel="external">RSVP</a></li>
</ul>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/17/promise-in-javascript/">
  <time datetime="2015-02-17T07:18:38.000Z">
    Feb 17 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/17/promise-in-javascript/">promise in javascript</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>在刚开始写Node.js代码的时候，最头疼的就是缩进了，其实是由于回调导致的，因为Node.js是异步编程的，几乎所有的逻辑都是靠异步调用实现的。这也是和我们常用的同步编程最大的却别。</p>
<p>后来在使用其他的框架的使用，比如JQeury的ajax，AngularJS的时候也用过其中实现的promise，不过那是还不知道那就是promise，所以对于为什么使用then，done，when，只是照着例子写代码就是了。最近觉得应该看一下什么是promise，所以就找到了promise的源头：<a href="http://wiki.commonjs.org/wiki/Promises/A" target="_blank" rel="external">Promise/A</a>，看了一下其中的定义，终于明白了什么是then，以及应该怎么使用。</p>
<p>其实在使用其他的promise实现的时候还会遇到when，done之类的方法，这些方法是用来做什么的呢？可以看看这篇关于<a href="http://www.infoq.com/cn/news/2011/09/js-promise/" target="_blank" rel="external">JS Promise</a>的文章。如果有空的话也可以自己现实一个promise，看看和现有的实现<a href="https://github.com/kriskowal/q" target="_blank" rel="external">Q</a>，<a href="https://github.com/tildeio/rsvp.js" target="_blank" rel="external">RSVP</a>，<a href="https://github.com/cujojs/when" target="_blank" rel="external">when</a>有哪些差距。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/11/invalid-recursive-type-struct/">
  <time datetime="2015-02-11T03:39:38.000Z">
    Feb 11 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/11/invalid-recursive-type-struct/">invalid recursive type struct</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>用惯了面向对象编程的语言，认为一切都是指针之后，再切换到Go这种语言真是不习惯啊。今天定义了一个structure：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">    x <span class="typename">float32</span></span><br><span class="line">    y <span class="typename">float32</span></span><br><span class="line">    next Point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后编译报错：invalid recursive type struct…</p>
<p>查了一下才明白，因为struct是值类型，如果这样的定义的话就形成了以无限循环，每一个Point会包含一个Point，所以解决方法就是改成指针：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">    x <span class="typename">float32</span></span><br><span class="line">    y <span class="typename">float32</span></span><br><span class="line">    next *Point</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>因为指针是固定大小的，也可以是nil，所以这就没问题了。</p>
<p>嗯小白。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/02/04/Constants-in-Objective-C/">
  <time datetime="2015-02-04T03:41:43.000Z">
    Feb 4 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/02/04/Constants-in-Objective-C/">Constants in Objective-C</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>在Objective-C中定义常量的方式一般有如下几种：</p>
<ul>
<li>#define</li>
<li>const</li>
<li>static const</li>
<li>extern const</li>
<li>FOUNDATION_EXPORT const</li>
</ul>
<p>这几中方式有什么不同呢？我们应该使用那种呢？</p>
<h2 id="23define"><a href="#23define" class="headerlink" title="#define"></a>#define</h2><p>从C中继承来的，不过已经不再推荐使用了，因为define属于预编译指令，编译器会在生成的代码中替换掉定义的常量，那么其实它定义的不是一个变量，只是一个用来替换的代码块。这就给调试带来了麻烦。另外也有人用define定义函数，甚至紧紧是几行经常重复的代码块，其实这更容易出现问题，如果学过C语言的一般都应该看过define定义函数有哪些坑吧。</p>
<h2 id="const"><a href="#const" class="headerlink" title="const"></a>const</h2><p>适合用来定义局部常量，比如在一个代码块里，或者在一个实现文件里（.m文件）</p>
<h2 id="static_const"><a href="#static_const" class="headerlink" title="static const"></a>static const</h2><p>适合用来定义文件内的常量，通常定义在实现文件里，由于static修饰，只能用在改文件内，外部无法获取。（也可以在方法内或一个代码块内声明static 变量，那么它的作用域就是当前声明所在的域，外部不可见，但是一直存在，不被销毁）</p>
<h2 id="extern_const"><a href="#extern_const" class="headerlink" title="extern const"></a>extern const</h2><p>如果定义的常量给外部类，文件使用的，则应该使用extern，使得变量（也可以应用于方法）在外部可见。</p>
<h2 id="FOUNDATION_EXPORT_const"><a href="#FOUNDATION_EXPORT_const" class="headerlink" title="FOUNDATION_EXPORT const"></a>FOUNDATION_EXPORT const</h2><p>如果你的代码是和C/C++混编的，为了使声明的变量在其他文件中可以，应该使用这种方式，其他情况下和extern的作用一样。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2015/01/29/Questions-for-interface-in-Go/">
  <time datetime="2015-01-29T03:49:57.000Z">
    Jan 29 2015
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2015/01/29/Questions-for-interface-in-Go/">Questions for interface in Go</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>刚刚开始学习<a href="https://golang.org" target="_blank" rel="external">Go</a>，最近看到<a href="http://avtok.com/2014/11/05/interface-upgrades.html" target="_blank" rel="external">一篇关于Go interface的文章</a>。<br>虽然挺喜欢GO的，但是文章里说的关于interface的一些优点，想想在其他语言里也基本都有啊，比如：</p>
<ul>
<li><blockquote>
<p>interfaces be safely cast to narrower interfaces (i.e., every io.ReadCloser is also an io.Reader), but they can also be cast to wider or even unrelated interfaces if their dynamic types support it.<br>在Java也可以随意cast啊，不是么？如果说的是<code>instance.(type)</code>这种cast写法比较方便，那也算不上interface的优势吧？更安全？Java或其他高级语言也可以在cast之前进行类型判断</p>
</blockquote>
</li>
<li><blockquote>
<p>Supporting this kind of copy elision in io.Copy is tricky since we can’t change the signature of either io.Reader.Read or io.Writer.Write without sacrificing generality. Luckily, interface upgrades come to our rescue. The io package defines two auxiliary types, io.WriterTo and io.ReaderFrom which io.Readers and io.Writers (respectively) may optionally implement.<br>真心没看懂啊，不都是cast么？难道这个不用cast？</p>
</blockquote>
</li>
</ul>
<p>唉，剩下的就不一个一个说了，基本上我觉得其他的常用语言也都能做到，虽然我挺喜欢Go的，但目前主要是觉得确实可以少写很多不必要的东西，比如变量类型啊，分号啊之类的，看来我还在初级阶段，真的没看到这篇文章里的东西和其他语言比有多高级。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
    <a href="/page/2/" class="next">下一页</a>
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2016 <a href="/">Jinyu Li</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'mrsnippet' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>